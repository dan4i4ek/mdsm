# Проблемы Multihoming-га.

Для начала давайте обозначим, какие проблемы у нас возникнут если мы будем включим Multihoming в Active-Active режиме. Естественно самой острой проблемой будут петли \(ну или циклы, кому как нравится\), так как EVPN — это все же является L2VPN-ом. По сути, если победить эту проблему — то технология уже будет лучше того же VPLS, который в All-Active режиме вообще не умеет работать. Еще одной немаловажной проблемой будет балансировка трафика, так как не все multihomed PE маршрутизаторы будут изучать маки от клиента. Другие проблемы менее критичны, точнее скажем так — другие проблемы хоть и есть, но их наличие не делает технологию нежизнеспособной.

Давайте рассмотрим, как эти проблемы решены в EVPN.

Борьба с петлями имеет целый комплекс мер. Первое естественно split horizon — кадр, полученный от других PE маршрутизаторов \(то есть из ядра\) не отправляется снова в ядро. Но естественно этого недостаточно, так как основное место сети, где может возникнуть петля — это подключение multihomed CE коммутатора к нескольким PE-маршрутизаторам. Для устранения петель в этом сегменте используются Designated Forwarder и Split Horizon Label, Но обо всем по порядку.

