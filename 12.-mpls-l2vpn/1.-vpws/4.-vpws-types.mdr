# Виды VPWS

Рассмотренный пример — это EoMPLS \(Ethernet over MPLS\). Он является частью технологии PWE3, которая суть развитие VLL Martini Mode. И всё это вместе и есть VPWS. Тут главное не запутаться в определениях. Позвольте мне быть вашим проводником.  
Итак, **VPWS** — общее название решений для L2VPN вида точка-точка.  
**PW** — это виртуальный L2-канал, который лежит в основе любой технологии L2VPN и служит туннелем для передачи данных.  
**VLL** \(Virtual Leased Line\) — это уже технология, которая позволяет инкапсулировать кадры различных протоколов канального уровня в MPLS и передавать их через сеть провайдера.

> Выделяют следующие виды VLL:  
> **VLL CCC** — Circuit Cross Connect. В этом случает нет метки VPN, а транспортные назначаются вручную \(статический LSP\) на каждом узле, включая правила swap. То есть в стеке будет всегда только одна метка, а каждый такой LSP может нести трафик только одного VC. Ни разу не встречал его в жизни. Главное его достоинство — он может обеспечить связность двух узлов, подключенных к одному PE.  
>   
> **VLL TCC** — Translational Cross Connect. То же, что CCC, но позволяет с разных концов использовать разные протоколы канального уровня.  
> Работает это только с IPv4. PE при получении удаляет заголовок канального уровня, а при передаче в AC-интерфейс вставляет новый.  
> Интересно? Начните [отсюда](http://www.juniper.net/techpubs/en_US/junos13.3/information-products/pathway-pages/config-guide-mpls-applications/config-guide-mpls-applications-ccc-tcc.pdf).  
>   
> **VLL SVC** — Static Virtual Circuit. Транспортный LSP строится обычными механизмами \(LDP или RSVP-TE\), а сервисная метка VPN назначается вручную. tLDP в этом случае не нужен. Не может обеспечить локальную связность \(если два узла подключены к одному PE\).  
>   
> **Martini VLL** — это примерно то, с чем мы имели дело выше. Транспортный LSP строится обычным образом, метки VPN распределяются tLDP. Красота! Не поддерживает локальную связность.  
>   
> **Kompella VLL** — Транспортный LSP обычным образом, для распределения меток VPN — BGP \(как и полагается, с RD/RT\). Уау! Поддерживает локальную связность. Ну и ладно.

**PWE3** — Pseudo Wire Emulation Edge to Edge. Строго говоря, область применения этой технология шире, чем только MPLS. Однако в современном мире в 100% случаев они работают в связке. Поэтому PWE3 можно рассматривать как аналог Martini VLL с расширенным функционалом — сигнализацией так же занимаются LDP+tLDP.  
Коротко его отличия от Martini VLL можно представить так:

* Сообщает статус PW, используя сообщение LDP Notification.
* Поддерживает Multi-Segment PW, когда end-to-end канал состоит из нескольких более мелких кусков. В этом случае один и тот же PW может стать сегментов для нескольких каналов.
* Поддерживает TDM-интерфейсы.
* Предоставляет механизм согласования фрагментации.
* Другие...

Сейчас PWE3 — стандарт де факто и именно он был в примере выше.

> Я тут везде говорю об Ethernet для того, чтобы показать наиболее наглядный пример. Всё, что касается других канальных протоколов, это, пожалуйста, на самостоятельное изучение.

