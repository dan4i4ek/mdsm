# Транспортный режим работы IPSec

Он много чем отличается от туннельного, но самое важное – это метод инкапсуляции.

Вот пакет IPSec в туннельном режиме  
![](http://img-fotki.yandex.ru/get/5645/83739833.23/0_abb79_f9ab238e_L.jpg)

А это пакет IPSec в транспортном:

![](http://img-fotki.yandex.ru/get/6425/83739833.23/0_abb78_1f6d1a02_L.jpg)

То есть туннельный шифрует изначальный пакет полностью и добавляет новый заголовок IP. Транспортный же шифрует всё, что выше уровня IP, а заголовок IP оставляет без изменений.

Грубо говоря, туннельный режим вы используете для того, чтобы связать две приватные сети через публичную, обеспечив при этом шифрование \(Что-то вроде безопасного GRE\). Транспортный же актуален тогда, когда IP-связность уже достигнута, но трафик между узлами нужно шифровать.  
Удачным примером применения транспортного режима может быть схема сервер-клиент. Например, работа клиент-банка. Сервер и так уже доступен, но трафик нужно зашифровать.

Но мы не об этом. Нам всё-таки, надо объединять сети.

